<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>èœè°±ç ”å‘åŠ©æ‰‹</title>
    <style>
      body { font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC",sans-serif; margin: 0; background: #f4f7fb; }
      .wrap { max-width: 860px; margin: 2rem auto; background: #fff; border-radius: 14px; box-shadow: 0 10px 30px rgba(8,30,66,.12); padding: 1.2rem; }
      h1 { margin-top: 0; font-size: 1.3rem; }
      textarea { width: 100%; min-height: 140px; border: 1px solid #d8e0ea; border-radius: 10px; padding: .8rem; font-size: 1rem; }
      input, button { padding: .6rem .8rem; border-radius: 10px; border: 1px solid #d8e0ea; font-size: .95rem; }
      button { background: #2f6fec; color: #fff; cursor: pointer; border: none; }
      button:disabled { background: #9fb8ef; cursor: not-allowed; }
      .row { display: flex; gap: .6rem; margin: .7rem 0; }
      .row input { flex: 1; }
      .card { background: #f7faff; border: 1px solid #e4ecfb; border-radius: 10px; padding: .9rem; white-space: pre-wrap; line-height: 1.55; }
      .muted { color: #637289; font-size: .9rem; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h1>ğŸ³ èœè°±ç ”å‘åŠ©æ‰‹ï¼ˆGemini 2.5ï¼‰</h1>
      <div class="muted">è·¨å¹³å°ç½‘é¡µè®¿é—®ï¼šAndroid / iOS / macOS / Windows</div>
      <div class="row">
        <input id="api" value="http://localhost:8000" placeholder="API åœ°å€" />
      </div>
      <textarea id="query" placeholder="ä¾‹å¦‚ï¼šè¯·è®¾è®¡3é“ä½è„‚é«˜è›‹ç™½çš„ä¸€å‘¨æ™šé¤ï¼Œå¹¶ç»™å‡ºå¤±è´¥ç‚¹è§„é¿ã€‚"></textarea>
      <div class="row">
        <button id="send">ç”Ÿæˆæ–¹æ¡ˆ</button>
      </div>
      <h3>è¾“å‡º</h3>
      <div id="answer" class="card">ç­‰å¾…è¾“å…¥...</div>
    </div>

    <script>
      const sendBtn = document.getElementById('send');
      const apiInput = document.getElementById('api');
      const queryInput = document.getElementById('query');
      const answer = document.getElementById('answer');

      sendBtn.addEventListener('click', async () => {
        const query = queryInput.value.trim();
        if (!query) return;

        sendBtn.disabled = true;
        answer.textContent = 'æ­£åœ¨ç”Ÿæˆï¼Œè¯·ç¨å€™...';

        try {
          const resp = await fetch(`${apiInput.value}/chat`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ query, session_id: 'web-user' })
          });
          const data = await resp.json();
          if (!resp.ok) throw new Error(data.detail || 'è¯·æ±‚å¤±è´¥');
          answer.textContent = data.answer || 'æœªè¿”å›å†…å®¹';
        } catch (e) {
          answer.textContent = `é”™è¯¯ï¼š${e.message}`;
        } finally {
          sendBtn.disabled = false;
        }
      });
    </script>
  </body>
</html>
